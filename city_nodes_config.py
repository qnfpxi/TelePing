#!/usr/bin/env python3
# å…¨å›½ä¸»è¦åŸå¸‚èŠ‚ç‚¹é…ç½® - åŸºäºç”¨æˆ·æä¾›çš„åŸå¸‚è¡¨
# æ¯ä¸ªåŸå¸‚é…ç½®2ä¸ªèŠ‚ç‚¹: IDC + è·¯ç”±å™¨

# æ ¼å¼: {"name": "åŸå¸‚å", "pro_id": çœä»½ID, "city_id": åŸå¸‚ID}
MAJOR_CITIES = [
    # ç›´è¾–å¸‚
    {"name": "åŒ—äº¬", "pro_id": 180, "city_id": 202},
    {"name": "ä¸Šæµ·", "pro_id": 221, "city_id": 280},
    {"name": "é‡åº†", "pro_id": 49, "city_id": 246},
    {"name": "å¤©æ´¥", "pro_id": 243, "city_id": 279},

    # ä¸œéƒ¨æ²¿æµ·é‡ç‚¹åŸå¸‚
    {"name": "æ·±åœ³", "pro_id": 195, "city_id": 264},
    {"name": "å¹¿å·", "pro_id": 195, "city_id": 217},
    {"name": "æ­å·", "pro_id": 355, "city_id": 573},
    {"name": "å—äº¬", "pro_id": 357, "city_id": 590},
    {"name": "é’å²›", "pro_id": 190, "city_id": 516},
    {"name": "å¦é—¨", "pro_id": 79, "city_id": 476},

    # åä¸­åœ°åŒº
    {"name": "æ­¦æ±‰", "pro_id": 235, "city_id": 259},
    {"name": "éƒ‘å·", "pro_id": 196, "city_id": 271},
    {"name": "é•¿æ²™", "pro_id": 350, "city_id": 461},
    {"name": "å—æ˜Œ", "pro_id": 239, "city_id": 275},

    # è¥¿éƒ¨åœ°åŒº
    {"name": "æˆéƒ½", "pro_id": 353, "city_id": 539},
    {"name": "è¥¿å®‰", "pro_id": 194, "city_id": 601},
    {"name": "æ˜†æ˜", "pro_id": 227, "city_id": 560},
    {"name": "è´µé˜³", "pro_id": 188, "city_id": 392},

    # åŒ—éƒ¨åœ°åŒº
    {"name": "æ²ˆé˜³", "pro_id": 349, "city_id": 582},
    {"name": "å¤§è¿", "pro_id": 349, "city_id": 443},
    {"name": "å“ˆå°”æ»¨", "pro_id": 192, "city_id": 584},
    {"name": "é•¿æ˜¥", "pro_id": 351, "city_id": 587},

    # å…¶ä»–çœä¼š
    {"name": "æµå—", "pro_id": 190, "city_id": 212},
    {"name": "çŸ³å®¶åº„", "pro_id": 250, "city_id": 293},
    {"name": "å¤ªåŸ", "pro_id": 193, "city_id": 667},
    {"name": "åˆè‚¥", "pro_id": 236, "city_id": 609},
    {"name": "ç¦å·", "pro_id": 79, "city_id": 471},
    {"name": "å—å®", "pro_id": 352, "city_id": 532},

    # è¥¿åŒ—åœ°åŒº
    {"name": "å…°å·", "pro_id": 80, "city_id": 602},
    {"name": "è¥¿å®", "pro_id": 356, "city_id": 574},
    {"name": "é“¶å·", "pro_id": 189, "city_id": 575},
    {"name": "ä¹Œé²æœ¨é½", "pro_id": 346, "city_id": 719},
    {"name": "å‘¼å’Œæµ©ç‰¹", "pro_id": 183, "city_id": 433},
]

def get_province_ids():
    """è·å–å»é‡åçš„çœä»½IDåˆ—è¡¨"""
    return sorted(set(city["pro_id"] for city in MAJOR_CITIES))

def get_city_ids():
    """è·å–åŸå¸‚IDåˆ—è¡¨"""
    return [city["city_id"] for city in MAJOR_CITIES]

def get_pro_ids():
    """è·å–çœä»½IDåˆ—è¡¨ï¼ˆå»é‡ï¼‰"""
    return list(set([city["pro_id"] for city in MAJOR_CITIES]))

def get_node_config():
    """ç”Ÿæˆ17CE APIèŠ‚ç‚¹é…ç½®ï¼ˆè¿”å›æ•°ç»„æ ¼å¼ï¼Œç¬¦åˆå®˜æ–¹APIè¦æ±‚ï¼‰

    æ–¹æ¡ˆ1ï¼š4çœå¹³è¡¡æ–¹æ¡ˆï¼ˆä¸œè¥¿å—åŒ—å…¨è¦†ç›–ï¼‰
    - åŒ—äº¬(180)ï¼šååŒ—åœ°åŒºä»£è¡¨
    - ä¸Šæµ·(221)ï¼šåä¸œåœ°åŒºä»£è¡¨
    - å¹¿ä¸œ(195)ï¼šåå—åœ°åŒºä»£è¡¨
    - å››å·(353)ï¼šè¥¿å—åœ°åŒºä»£è¡¨

    é…ç½®å‚æ•°ï¼š
    - 4ä¸ªçœä»½è¦†ç›–ä¸œè¥¿å—åŒ—
    - 2ä¸ªè¿è¥å•†ï¼šç”µä¿¡(1) + è”é€š(2)
    - 2ç§èŠ‚ç‚¹ç±»å‹ï¼šIDC(1) + è·¯ç”±å™¨(2)
    - num=1ï¼ˆæœ€å°å€¼ï¼‰

    èŠ‚ç‚¹æ•°ä¸æˆæœ¬ï¼š
    - ç†è®ºèŠ‚ç‚¹æ•°ï¼š4çœ Ã— 2è¿è¥å•† Ã— 2ç±»å‹ Ã— 1 = 16ä¸ª
    - é¢„ä¼°å®é™…èŠ‚ç‚¹æ•°ï¼š8ä¸ªï¼ˆåŸºäº2çœæµ‹è¯•ï¼Œå®é™…çº¦ä¸ºç†è®º50%ï¼‰
    - å•æ¬¡æ¶ˆè€—ï¼š8ç§¯åˆ†
    - å‘¨æ¶ˆè€—ï¼š640ç§¯åˆ†ï¼ˆ40æ¬¡/å‘¨ Ã— 2ç«™ç‚¹ Ã— 8èŠ‚ç‚¹ï¼‰
    - 1ä¸‡ç§¯åˆ†å¯ç”¨ï¼šçº¦4ä¸ªæœˆ

    æµ‹è¯•å†å²ï¼š
    - 29çœÃ—3è¿è¥å•†Ã—2ç±»å‹Ã—num=10 â†’ 700ä¸ªèŠ‚ç‚¹ï¼ˆç¾éš¾ï¼‰
    - 2çœÃ—2è¿è¥å•†Ã—2ç±»å‹Ã—num=1 â†’ 4ä¸ªèŠ‚ç‚¹ï¼ˆå®æµ‹ï¼‰
    - 4çœÃ—2è¿è¥å•†Ã—2ç±»å‹Ã—num=1 â†’ 8ä¸ªèŠ‚ç‚¹ï¼ˆé¢„ä¼°ï¼Œå¾…éªŒè¯ï¼‰

    å‚æ•°è¯´æ˜ï¼š
    - pro_ids: çœä»½IDæ•°ç»„
    - num: æ¯ä¸ªåŒºåŸŸåˆ†é…èŠ‚ç‚¹æ•°
    - nodetype: [1, 2] IDC + è·¯ç”±å™¨
    - isps: [1, 2] ç”µä¿¡ + è”é€šï¼ˆç§»é™¤ç§»åŠ¨èŠ‚çœ33%ï¼‰
    - areas: [1] ä¸­å›½å¤§é™†
    """
    return {
        "pro_ids": [180, 221, 195, 353],  # åŒ—äº¬ã€ä¸Šæµ·ã€å¹¿ä¸œã€å››å·
        "num": 1,
        "nodetype": [1, 2],
        "isps": [1, 2],
        "areas": [1]
    }

if __name__ == "__main__":
    print(f"ğŸ™ï¸ é…ç½®åŸå¸‚æ€»æ•°: {len(MAJOR_CITIES)}")
    print(f"ğŸ“ çœä»½æ•°é‡: {len(get_province_ids())}")
    print(f"ğŸ”¢ èŠ‚ç‚¹æ€»æ•°: {len(MAJOR_CITIES) * 2}")
    print(f"\nğŸ“Š èŠ‚ç‚¹é…ç½®:")
    config = get_node_config()
    for key, value in config.items():
        print(f"  {key}: {value}")
